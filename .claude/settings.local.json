{
  "permissions": {
    "allow": [
      "Bash(npm run typecheck:*)",
      "Bash(npm run build:*)",
      "Bash(npm test)",
      "Bash(npm test:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: resolve critical bugs and improve robustness\n\n- Remove circular self-dependency in package.json\n- Use AbortController for proper fetch timeout cancellation \\(prevents resource leaks\\)\n- Add fallback error handling when adapter.parseError\\(\\) throws\n- Add configuration validation for rate limit, retry, circuit breaker settings\n- Enable adapter validation in production \\(warns instead of throwing\\)\n- Fix 403 error handling: only treat as rate_limit when header explicitly shows 0\n- Improve type safety: authToken parameter now uses AuthToken type\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\ndocs: update CHANGELOG with recent fixes\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(wc:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: implement safety hardening and cleanup improvements \\(Tier 0-2\\)\n\n## Tier 0 — Critical Fixes \\(Immediate\\)\n\n- fix\\(rate-limiter\\): clamp elapsed time to prevent negative token refill\n  After handle429\\(\\) sets lastRefill to future, elapsed could go negative\n  causing incorrect token calculations. Now clamped to Math.max\\(0, elapsed\\).\n\n- test\\(rate-limiter\\): add invariant tests for token bucket behavior\n  8 new tests covering: token limits, 429 handling, queue overflow,\n  adaptive backoff, and reset behavior.\n\n- feat\\(adapter-validator\\): make validation mandatory with fail-fast\n  assertValidAdapter\\(\\) now treats warnings as errors. Called on all\n  adapter registration - no partial compliance allowed.\n\n- feat\\(error-sanitizer\\): add core-side BoundaryError enforcement\n  New sanitizer validates adapter output, recomputes category/retryable\n  if invalid, ensures provider matches, and drops unsafe metadata keys\n  \\(passwords, tokens, secrets\\).\n\n## Tier 1 — Safety Hardening\n\n- feat\\(retry\\): implement policy inversion for safety-first defaults\n  Default maxRetries changed from 3 to 0 \\(no retry\\). Retry only occurs\n  when BOTH conditions met: error.retryable === true AND idempotency\n  is proven \\(SAFE, IDEMPOTENT, or CONDITIONAL with key\\).\n\n- feat\\(pipeline\\): map timeouts to canonical BoundaryError\n  AbortError now becomes BoundaryError with category: \"network\",\n  retryable: true, and full request context \\(url, method, timeout\\).\n\n- feat\\(boundary\\): add local-only state warning on construction\n  Explicit runtime warning about in-memory circuit breaker/rate limiter\n  state that resets on cold starts. Documents StateStorage interface\n  for Redis/Memcached integration.\n\n## Tier 2 — Cleanup\n\n- refactor\\(pipeline\\): remove deprecated NormalizedError\n  ErrorContext.error now uses BoundaryError directly. Removed legacy\n  boundaryErrorToNormalizedError\\(\\) and mapCategoryToErrorType\\(\\) methods.\n\n- feat\\(header-parser\\): add hardened header parsing utilities\n  New module with safe parsing for Retry-After, Link headers, and\n  rate limit headers. Validates bounds, handles malformed input,\n  prevents overflow attacks.\n\n- refactor\\(adapters\\): implement lazy instantiation for built-in adapters\n  Adapter instances created on-demand via cache rather than at module\n  load, reducing startup memory for unused providers.\n\n- feat\\(observability\\): add OpenTelemetry and Prometheus adapters\n  - OpenTelemetryObservability: spans, counters, histograms integration\n  - PrometheusObservability: /metrics endpoint, request/error counters,\n    duration histograms with configurable buckets\n\n## Files Changed\n\nNew files:\n- src/core/error-sanitizer.ts\n- src/core/header-parser.ts\n- src/observability/otel.ts\n- src/observability/prometheus.ts\n- src/strategies/rate-limit.test.ts\n\nModified:\n- src/core/adapter-validator.ts \\(fail-fast validation\\)\n- src/core/pipeline.ts \\(error sanitization, timeout handling\\)\n- src/core/types.ts \\(ErrorContext uses BoundaryError\\)\n- src/index.ts \\(lazy adapters, state warning, StateStorage interface\\)\n- src/observability/console.ts \\(BoundaryError logging\\)\n- src/providers/github/adapter.ts \\(hardened header parsing\\)\n- src/providers/github/pagination.ts \\(hardened Link parsing\\)\n- src/strategies/rate-limit.ts \\(elapsed clamping\\)\n- src/strategies/retry.ts \\(policy inversion\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(ls -la \"C:\\\\Users\\\\rvrag\\\\OneDrive\\\\Desktop\\\\Boundary\\\\src\"\" 2>/dev/null || ls \"C:UsersrvragOneDriveDesktopBoundarysrc \")",
      "Bash(npm install:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run lint)",
      "Bash(taskkill:*)",
      "Bash(git commit:*)"
    ]
  }
}
